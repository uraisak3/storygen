import streamlit as st
import random

st.set_page_config(page_title="StoryGen", page_icon="üìñ", layout="centered")
st.title("üìñ StoryGen")
st.subheader("–ü–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —ñ—Å—Ç–æ—Ä—ñ—ó –¥–ª—è –≤–∞—à–æ—ó –¥–∏—Ç–∏–Ω–∏ –∑–∞ 5 —Å–µ–∫—É–Ω–¥")
st.markdown("–Ü–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è –ø–µ—Ä–µ–¥ —Å–Ω–æ–º. –£–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é.")

# –§–æ—Ä–º–∞
col1, col2 = st.columns(2)
with col1:
    name = st.text_input("–Ü–º'—è –¥–∏—Ç–∏–Ω–∏", placeholder="–°–æ—Ñ—ñ–π–∫–∞")
    age = st.slider("–í—ñ–∫ –¥–∏—Ç–∏–Ω–∏", 3, 12, 6)
with col2:
    favorite = st.text_input("–£–ª—é–±–ª–µ–Ω–∞ —Ç–≤–∞—Ä–∏–Ω–∞ / –≥–µ—Ä–æ–π", placeholder="—î–¥–∏–Ω–æ—Ä—ñ–≥")
    gender = st.selectbox("–°—Ç–∞—Ç—å", ["–î—ñ–≤—á–∏–Ω–∫–∞", "–•–ª–æ–ø—á–∏–∫", "–ù–µ –≤–∞–∂–ª–∏–≤–æ"])

theme = st.selectbox("–¢–µ–º–∞ —ñ—Å—Ç–æ—Ä—ñ—ó", 
    ["–ü—Ä–∏–≥–æ–¥–∏", "–ú–∞–≥—ñ—è —Ç–∞ —á–∞—Ä—ñ–≤–Ω–∏—Ü—Ç–≤–æ", "–î—Ä—É–∂–±–∞", "–ü–æ–¥–æ—Ä–æ–∂—ñ", "–ü—Ä–∏—Ä–æ–¥–∞ —ñ —Ç–≤–∞—Ä–∏–Ω–∏", "–°–º—ñ–ª–∏–≤—ñ—Å—Ç—å", "–î–æ–±—Ä–æ—Ç–∞"])

if st.button("‚ú® –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é", type="primary"):
    if not name or not favorite:
        st.error("–í–≤–µ–¥—ñ—Ç—å —ñ–º'—è –¥–∏—Ç–∏–Ω–∏ —Ç–∞ —É–ª—é–±–ª–µ–Ω—É —Ç–≤–∞—Ä–∏–Ω—É")
    else:
        # –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —ñ—Å—Ç–æ—Ä—ñ—ó
        places = ["–∑–∞—á–∞—Ä–æ–≤–∞–Ω–æ–º—É –ª—ñ—Å—ñ", "–º–∞–≥—ñ—á–Ω–æ–º—É –∫–æ—Ä–æ–ª—ñ–≤—Å—Ç–≤—ñ", "–¥–∞–ª–µ–∫—ñ–π –∑–æ—Ä—è–Ω—ñ–π –ø–ª–∞–Ω–µ—Ç—ñ", "—Å—Ç–∞—Ä–æ–º—É —á–∞—Ä—ñ–≤–Ω–æ–º—É –∑–∞–º–∫—É", "—Ç–∞—î–º–Ω–∏—á–æ–º—É —Å–∞–¥—É"]
        friends = ["—Ä–æ–∑—É–º–Ω–∏–π –ª–∏—Å–∏—á–∫–∞", "—Å–º—ñ–ª–∏–≤–∏–π –≤–µ–¥–º–µ–¥–∏–∫", "–¥–æ–±—Ä–∞ —Ñ–µ—è", "–≤–µ—Å–µ–ª–∏–π –¥—Ä–∞–∫–æ–Ω—á–∏–∫", "—Ç–∞—î–º–Ω–∏—á–∏–π —î–¥–∏–Ω–æ—Ä—ñ–≥"]
        actions = ["–ø–µ—Ä–µ–º–∞–≥–∞–ª–∏ —Ç–µ–º–Ω–æ–≥–æ —á–∞—Ä—ñ–≤–Ω–∏–∫–∞", "–∑–Ω–∞–π—à–ª–∏ —Å–∫–∞—Ä–± –¥—Ä—É–∂–±–∏", "–¥–æ–ø–æ–º–∞–≥–∞–ª–∏ –ª—ñ—Å–æ–≤–∏–º –º–µ—à–∫–∞–Ω—Ü—è–º", "–≤–∏—Ä—É—à–∏–ª–∏ –≤ –µ–ø—ñ—á–Ω—É –ø–æ–¥–æ—Ä–æ–∂", "–Ω–∞–≤—á–∏–ª–∏—Å—è —Å–ø—Ä–∞–≤–∂–Ω—å–æ—ó –º–∞–≥—ñ—ó"]
        morals = ["—Å–ø—Ä–∞–≤–∂–Ω—è –¥—Ä—É–∂–±–∞ —Å–∏–ª—å–Ω—ñ—à–∞ –∑–∞ –±—É–¥—å-—è–∫—ñ —á–∞—Ä–∏", "—Å–º–ª–∏–≤—ñ—Å—Ç—å ‚Äî —Ü–µ –∫–æ–ª–∏ —Ç–∏ –±–æ—ó—à—Å—è, –∞–ª–µ –≤—Å–µ –æ–¥–Ω–æ —Ä–æ–±–∏—à", "–¥–æ–±—Ä–æ—Ç–∞ –∑–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è", "—É—è–≤–∞ –º–æ–∂–µ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∫—É–¥–∏ –∑–∞–≤–≥–æ–¥–Ω–æ"]

        place = random.choice(places)
        friend = random.choice(friends)
        action = random.choice(actions)
        moral = random.choice(morals)

        story = f"""–ñ–∏–ª–∞-–±—É–ª–∞ {gender.lower() if gender != '–ù–µ –≤–∞–∂–ª–∏–≤–æ' else '–º–∞–ª–µ–Ω—å–∫–∞ –¥–∏—Ç–∏–Ω–∞'} –Ω–∞ —ñ–º'—è {name}, —è–∫—ñ–π –±—É–ª–æ {age} —Ä–æ–∫—ñ–≤. 

{name} –¥—É–∂–µ –ª—é–±–∏–ª–∞{'' if gender == '–•–ª–æ–ø—á–∏–∫' else '–∞'} —Å–≤–æ–≥–æ —É–ª—é–±–ª–µ–Ω—Ü—è ‚Äî {favorite}. 

–û–¥–Ω–æ–≥–æ —Å–æ–Ω—è—á–Ω–æ–≥–æ (–∞ –º–æ–∂–µ, —ñ –º—ñ—Å—è—á–Ω–æ–≥–æ) –¥–Ω—è {name} –∑–Ω–∞–π—à–ª–∞ —Ç–∞—î–º–Ω–∏—á–∏–π –ø–æ—Ä—Ç–∞–ª —ñ –ø–æ—Ç—Ä–∞–ø–∏–ª–∞ —É {place}. –¢–∞–º –Ω–∞ –Ω–µ—ó —á–µ–∫–∞–≤ –Ω–æ–≤–∏–π –¥—Ä—É–≥ ‚Äî {friend}. 

–†–∞–∑–æ–º –≤–æ–Ω–∏ {action}. –ü–æ –¥–æ—Ä–æ–∑—ñ —Ç—Ä–∞–ø–ª—è–ª–∏—Å—è –¥–∏–≤–æ–≤–∏–∂–Ω—ñ –ø—Ä–∏–≥–æ–¥–∏, –∑–∞–≥–∞–¥–∫–∏ —Ç–∞ –Ω–æ–≤—ñ –¥—Ä—É–∑—ñ. 

–ü—ñ—Å–ª—è –≤—Å—ñ—Ö –≤–∏–ø—Ä–æ–±—É–≤–∞–Ω—å {name} –ø–æ–≤–µ—Ä–Ω—É–ª–∞—Å—è –¥–æ–¥–æ–º—É —ñ –∑—Ä–æ–∑—É–º—ñ–ª–∞ –≥–æ–ª–æ–≤–Ω–µ: {moral}.

–ó —Ç–æ–≥–æ –¥–Ω—è {name} —Å—Ç–∞–ª–∞ —â–µ { '—Å–º—ñ–ª–∏–≤—ñ—à–∏–º' if gender == '–•–ª–æ–ø—á–∏–∫' else '—Å–º—ñ–ª–∏–≤—ñ—à–æ—é' } —ñ —â–∞—Å–ª–∏–≤—ñ—à–æ—é."""

        st.success("–Ü—Å—Ç–æ—Ä—ñ—è –≥–æ—Ç–æ–≤–∞! üéâ")
        st.markdown("### –í–∞—à–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è:")
        st.markdown(story)

        # –ü—Ä–æ–º–ø—Ç –¥–ª—è —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ–π
        image_prompt = f"–î–∏—Ç—è—á–∞ –∫–Ω–∏–∂–∫–æ–≤–∞ —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ—è –≤ –º'—è–∫–æ–º—É –∫–∞–∑–∫–æ–≤–æ–º—É —Å—Ç–∏–ª—ñ: {age}-—Ä—ñ—á–Ω–∞ { '–¥—ñ–≤—á–∏–Ω–∫–∞' if gender in ['–î—ñ–≤—á–∏–Ω–∫–∞', '–ù–µ –≤–∞–∂–ª–∏–≤–æ'] else '—Ö–ª–æ–ø—á–∏–∫'} –Ω–∞ —ñ–º'—è {name} –∑ {favorite} –≤ {place}. {action}. –Ø—Å–∫—Ä–∞–≤—ñ –∫–æ–ª—å–æ—Ä–∏, –º–∞–≥—ñ—á–Ω–∞ –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞, —Å—Ç–∏–ª—å children's book illustration"
        st.markdown("–ü—Ä–æ–º–ø—Ç –¥–ª—è —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ–π (–≤—Å—Ç–∞–≤—Ç–µ –≤ Bing Create, Grok –∞–±–æ Flux):")
        st.code(image_prompt, language=None)

        st.balloons()

st.divider()
st.subheader("üí∞ –•–æ—á–µ—Ç–µ –Ω–µ–æ–±–º–µ–∂–µ–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å —ñ—Å—Ç–æ—Ä—ñ–π + –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω—ñ —Ç–µ–º–∏?")
st.markdown("""
–ü—Ä–µ–º—ñ—É–º-–≤–µ—Ä—Å—ñ—è ‚Äî $7‚Äì12 –Ω–∞ –º—ñ—Å—è—Ü—å –∞–±–æ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ $29 –∑–∞ –¥–æ–≤—ñ—á–Ω–∏–π –¥–æ—Å—Ç—É–ø.

–°—Ç–≤–æ—Ä—ñ—Ç—å –∞–∫–∞—É–Ω—Ç –Ω–∞ Gumroad.com –∞–±–æ BuyMeACoffee.com (–¥—É–∂–µ –ø—Ä–æ—Å—Ç–æ) —ñ –¥–æ–¥–∞–π—Ç–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∏–∂—á–µ.
""")

payment_link = st.text_input("–í—Å—Ç–∞–≤—Ç–µ —Å—é–¥–∏ –≤–∞—à–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –æ–ø–ª–∞—Ç—É (Gumroad / Stripe / BuyMeACoffee)", 
                            value="https://your-gumroad-link.com")
if payment_link and payment_link != "https://your-gumroad-link.com":
    st.markdown(f"[–ö—É–ø–∏—Ç–∏ –ø—Ä–µ–º—ñ—É–º ‚Üí]({payment_link})")
