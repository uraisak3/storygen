import streamlit as st
import random

st.set_page_config(page_title="StoryGen", page_icon="üìñ", layout="centered")

st.title("üìñ StoryGen")
st.subheader("–ü–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –∫–∞–∑–∫–∏ –¥–ª—è –≤–∞—à–æ—ó –¥–∏—Ç–∏–Ω–∏")
st.markdown("–Ø–∫—ñ—Å–Ω—ñ, –µ–º–æ—Ü—ñ–π–Ω—ñ —ñ—Å—Ç–æ—Ä—ñ—ó —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é. –ß—É–¥–æ–≤–æ –ø–µ—Ä–µ–¥ —Å–Ω–æ–º.")

# –§–æ—Ä–º–∞ –≤–≤–æ–¥—É
col1, col2 = st.columns(2)
with col1:
    name = st.text_input("–Ü–º'—è –¥–∏—Ç–∏–Ω–∏", placeholder="–Ü–≤–∞–Ω–∫–æ")
    age = st.slider("–í—ñ–∫ –¥–∏—Ç–∏–Ω–∏", 3, 12, 6)

with col2:
    favorite = st.text_input("–£–ª—é–±–ª–µ–Ω–∞ —Ç–≤–∞—Ä–∏–Ω–∞ / –≥–µ—Ä–æ–π / —Ä—ñ—á", placeholder="–¥–∏–Ω–æ–∑–∞–≤—Ä")
    gender = st.selectbox("–°—Ç–∞—Ç—å", ["–•–ª–æ–ø—á–∏–∫", "–î—ñ–≤—á–∏–Ω–∫–∞", "–ù–µ –≤–∞–∂–ª–∏–≤–æ"])

theme = st.selectbox("–¢–µ–º–∞ —ñ—Å—Ç–æ—Ä—ñ—ó", 
    ["–ü—Ä–∏–≥–æ–¥–∏", "–ú–∞–≥—ñ—è —Ç–∞ —á–∞—Ä—ñ–≤–Ω–∏—Ü—Ç–≤–æ", "–î—Ä—É–∂–±–∞", "–ü–æ–¥–æ—Ä–æ–∂—ñ", "–ü—Ä–∏—Ä–æ–¥–∞ —ñ —Ç–≤–∞—Ä–∏–Ω–∏", 
     "–°–º—ñ–ª–∏–≤—ñ—Å—Ç—å", "–î–æ–±—Ä–æ—Ç–∞", "–ü–æ–¥–æ–ª–∞–Ω–Ω—è —Å—Ç—Ä–∞—Ö—É", "–°—ñ–º'—è", "–ú—Ä—ñ—è"])

if st.button("‚ú® –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∫–∞–∑–∫—É", type="primary"):
    if not name.strip() or not favorite.strip():
        st.error("–í–≤–µ–¥—ñ—Ç—å —ñ–º'—è –¥–∏—Ç–∏–Ω–∏ —Ç–∞ —É–ª—é–±–ª–µ–Ω—É —Ç–≤–∞—Ä–∏–Ω—É/–≥–µ—Ä–æ—è")
    else:
        # –£–∑–≥–æ–¥–∂–µ–Ω–Ω—è –∑–∞ —Ä–æ–¥–æ–º ‚Äî –∑–∞–≤–∂–¥–∏ —á–∏—Å—Ç–∞ —Ñ–æ—Ä–º–∞ –±–µ–∑ —Å–ª–µ—à—ñ–≤
         if gender == "–•–ª–æ–ø—á–∏–∫" or gender == "–ù–µ –≤–∞–∂–ª–∏–≤–æ":
             # –ß–æ–ª–æ–≤—ñ—á–∞ —Ñ–æ—Ä–º–∞ –¥–ª—è —Ö–ª–æ–ø—á–∏–∫–∞ —Ç–∞ –¥–ª—è "–ù–µ –≤–∞–∂–ª–∏–≤–æ"
             zhyv = "–ñ–∏–≤-–±—É"
             desc = "—Ö–ª–æ–ø—á–∏–∫"
             loved = "–ª—é–±–∏–≤"
             found = "–∑–Ω–∞–π—à–æ–≤"
             went = "–ø—ñ—à–æ–≤"
             returned = "–ø–æ–≤–µ—Ä–Ω—É–≤—Å—è"
             became = "—Å—Ç–∞–≤"
             braver = "—Å–º—ñ–ª–∏–≤—ñ—à–∏–º"
             happier = "—â–∞—Å–ª–∏–≤—ñ—à–∏–º"
         else:
            # –¢—ñ–ª—å–∫–∏ –¥–ª—è –¥—ñ–≤—á–∏–Ω–∫–∏ ‚Äî –∂—ñ–Ω–æ—á–∞ —Ñ–æ—Ä–º–∞
            zhyv = "–ñ–∏–ª–∞-–±—É–ª–∞"
            desc = "–¥—ñ–≤—á–∏–Ω–∫–∞"
            loved = "–ª—é–±–∏–ª–∞"
            found = "–∑–Ω–∞–π—à–ª–∞"
            went = "–ø—ñ—à–ª–∞"
            returned = "–ø–æ–≤–µ—Ä–Ω—É–ª–∞—Å—è"
            became = "—Å—Ç–∞–ª–∞"
            braver = "—Å–º—ñ–ª–∏–≤—ñ—à–æ—é"
            happier = "—â–∞—Å–ª–∏–≤—ñ—à–æ—é"

        # –†—ñ–∑–Ω–æ–º–∞–Ω—ñ—Ç–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—ó
         places = [
            "–∑–∞—á–∞—Ä–æ–≤–∞–Ω–æ–º—É –ª—ñ—Å—ñ",
            "–¥–∞–≤–Ω—å–æ–º—É –∫–æ—Ä–æ–ª—ñ–≤—Å—Ç–≤—ñ –Ω–∞ –≤–µ—Ä—à–∏–Ω—ñ –≥–æ—Ä–∏",
            "—Ç–∞—î–º–Ω–∏—á–æ–º—É –ø—ñ–¥–≤–æ–¥–Ω–æ–º—É –º—ñ—Å—Ç—ñ",
            "—Å—Ç–∞—Ä–æ–º—É —á–∞—Ä—ñ–≤–Ω–æ–º—É –∑–∞–º–∫—É",
            "–∑–æ—Ä—è–Ω—ñ–π –ø–ª–∞–Ω–µ—Ç—ñ –∑ –¥–≤–æ–º–∞ –º—ñ—Å—è—Ü—è–º–∏",
            "–≤–µ–ª–∏–∫–æ–º—É —á–∞—Ä—ñ–≤–Ω–æ–º—É —Å–∞–¥—É",
            "–∑–∞–±—É—Ç–æ–º—É —Å–µ–ª—ñ —Å–µ—Ä–µ–¥ –∑–æ–ª–æ—Ç–∏—Ö –ø–∞–≥–æ—Ä–±—ñ–≤"
        ]
        
         friends = [
            "—Ä–æ–∑—É–º–Ω–∏–π —Å—Ç–∞—Ä–∏–π —Å–æ–≤–∞",
            "—Å–º—ñ–ª–∏–≤–∏–π –≤–æ–≤—á–µ–Ω—è",
            "–¥–æ–±—Ä–∞ —Ñ–µ—è-–±–µ—Ä–µ–≥–∏–Ω—è",
            "–≤–µ—Å–µ–ª–∏–π –¥—Ä–∞–∫–æ–Ω—á–∏–∫-—Ö–º–∞—Ä–∏–Ω–∫–∞",
            "—Ç–∞—î–º–Ω–∏—á–∏–π —î–¥–∏–Ω–æ—Ä—ñ–≥",
            "–≥—Ä–∞–π–ª–∏–≤–∏–π –ª–∏—Å–∏—á–∫–∞-—á–∞—Ä—ñ–≤–Ω–∏–∫",
            "–≤–µ–ª–∏–∫–∏–π –≤–µ–¥–º—ñ–¥—å-–æ—Ö–æ—Ä–æ–Ω–µ—Ü—å"
        ]
        
         objects = [
            "–º–∞–≥—ñ—á–Ω–∏–π –∫—Ä–∏—Å—Ç–∞–ª",
            "–¥–∞–≤–Ω—é –∫–∞—Ä—Ç—É –∑—ñ —Å–∫–∞—Ä–±–∞–º–∏",
            "—á–∞—Ä—ñ–≤–Ω—É —Ñ–ª–µ–π—Ç—É",
            "–∑–æ–ª–æ—Ç–µ –ø–µ—Ä–æ, —è–∫–µ –º–∞–ª—é—î —Å–∞–º–µ",
            "—Å—Ä—ñ–±–Ω–∏–π –∞–º—É–ª–µ—Ç",
            "–∂–∏–≤—É –∫–Ω–∏–≥—É —ñ—Å—Ç–æ—Ä—ñ–π"
        ]

        place = random.choice(places)
        friend = random.choice(friends)
        special_object = random.choice(objects)

        # –î–æ–≤–≥–∞, –∂–∏–≤–∞ —ñ—Å—Ç–æ—Ä—ñ—è
        story = f"""\
{zhyv} {desc} –Ω–∞ —ñ–º'—è {name}, —è–∫—ñ–π/—è–∫–æ–º—É –±—É–ª–æ {age} —Ä–æ–∫—ñ–≤.

{name} –¥—É–∂–µ {loved} —Å–≤–æ–≥–æ –Ω–∞–π–∫—Ä–∞—â–æ–≥–æ –¥—Ä—É–≥–∞ ‚Äî {favorite}. –ö–æ–∂–Ω–æ–≥–æ –≤–µ—á–æ—Ä–∞ –≤–æ–Ω–∏ –ª–µ–∂–∞–ª–∏ –≤ –ª—ñ–∂–∫—É –π —Ä–æ–∑–ø–æ–≤—ñ–¥–∞–ª–∏ –æ–¥–∏–Ω –æ–¥–Ω–æ–º—É –ø—Ä–æ —Å–≤–æ—ó –º—Ä—ñ—ó —Ç–∞ –ø—Ä–∏–≥–æ–¥–∏.

–ê–ª–µ –æ–¥–Ω–æ–≥–æ —Ä–∞–∑—É –≤—Å–µ –∑–º—ñ–Ω–∏–ª–æ—Å—è. –ì—É–ª—è—é—á–∏ –±—ñ–ª—è —Å—Ç–∞—Ä–æ–≥–æ –¥—É–±–∞, {name} –ø–æ–º—ñ—Ç–∏–≤/–ø–æ–º—ñ—Ç–∏–ª–∞ –¥–∏–≤–Ω–∏–π –±–ª–∏—Å–∫. –¶–µ –±—É–≤ {special_object}, —è–∫–∏–π –ª–µ–∂–∞–≤ –ø—Ä–æ—Å—Ç–æ –Ω–∞ –∑–µ–º–ª—ñ. –Ø–∫ —Ç—ñ–ª—å–∫–∏ {name} –ø—ñ–¥–Ω—è–≤/–ø—ñ–¥–Ω—è–ª–∞ –π–æ–≥–æ, –ø–µ—Ä–µ–¥ –æ—á–∏–º–∞ –≤—ñ–¥–∫—Ä–∏–≤—Å—è —Å—è–π–ª–∏–≤–∏–π –ø–æ—Ä—Ç–∞–ª.

¬´–¶–µ —à–∞–Ω—Å –Ω–∞ —Å–ø—Ä–∞–≤–∂–Ω—é –ø—Ä–∏–≥–æ–¥—É¬ª, ‚Äî –ø–æ–¥—É–º–∞–≤/–ø–æ–¥—É–º–∞–ª–∞ {name} —ñ —Å–º—ñ–ª–∏–≤–æ {went} –≤—Å–µ—Ä–µ–¥–∏–Ω—É. –¢–∞–∫ {name} –æ–ø–∏–Ω–∏–≤—Å—è/–æ–ø–∏–Ω–∏–ª–∞—Å—è –≤ {place}.

–¢–∞–º –Ω–∞ –Ω—å–æ–≥–æ/–Ω–µ—ó –≤–∂–µ —á–µ–∫–∞–≤ –Ω–æ–≤–∏–π –¥—Ä—É–≥ ‚Äî {friend}.

¬´–ü—Ä–∏–≤—ñ—Ç, {name}! ‚Äî –ø—Ä–∏–≤—ñ—Ç–∞–≤—Å—è –¥—Ä—É–≥. ‚Äî –Ø –∑–Ω–∞–≤, —â–æ —Ç–∏ –ø—Ä–∏–π–¥–µ—à. –£ –Ω–∞—à–æ–º—É —Å–≤—ñ—Ç—ñ —Ç—Ä–∞–ø–∏–ª–∞—Å—è –±—ñ–¥–∞, —ñ —Ç—ñ–ª—å–∫–∏ —Ö—Ç–æ—Å—å —ñ–∑ —á–∏—Å—Ç–∏–º —Å–µ—Ä—Ü–µ–º –º–æ–∂–µ —ó—ó –≤–∏–ø—Ä–∞–≤–∏—Ç–∏¬ª.

{name} —ñ {friend} —Ä–∞–∑–æ–º –≤–∏—Ä—É—à–∏–ª–∏ –≤ –ø–æ–¥–æ—Ä–æ–∂. –í–æ–Ω–∏ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ –∫—Ä—ñ–∑—å –∑–∞—á–∞—Ä–æ–≤–∞–Ω—ñ —Ö–∞—â—ñ, –ø–µ—Ä–µ—Ç–∏–Ω–∞–ª–∏ —Å–≤—ñ—Ç–ª–æ–≤—ñ –º–æ—Å—Ç–∏, —Ä–æ–∑–≥–∞–¥—É–≤–∞–ª–∏ –∑–∞–≥–∞–¥–∫–∏ —Å—Ç–∞—Ä–æ–¥–∞–≤–Ω—ñ—Ö –¥–µ—Ä–µ–≤ —ñ –Ω–∞–≤—ñ—Ç—å —Å–ø—ñ–≤–∞–ª–∏ –ø—ñ—Å–Ω—é —Ä–∞–∑–æ–º –∑ –≤—ñ—Ç—Ä–æ–º.

–Ü–Ω–æ–¥—ñ –±—É–ª–æ —Å—Ç—Ä–∞—à–Ω–æ, —ñ–Ω–æ–¥—ñ –¥—É–∂–µ —Å–º—ñ—à–Ω–æ. –ê–ª–µ —â–æ—Ä–∞–∑—É, –∫–æ–ª–∏ {name} —Ö–æ—Ç—ñ–≤/—Ö–æ—Ç—ñ–ª–∞ –∑–¥–∞—Ç–∏—Å—è, {favorite} (—è–∫–∏–π —è–∫–∏–º–æ—Å—å –¥–∏–≤–æ–º –±—É–≤ –ø–æ—Ä—É—á —É –¥—É–º–∫–∞—Ö) –ø—ñ–¥–±–∞–¥—å–æ—Ä—é–≤–∞–≤ –π–æ–≥–æ/—ó—ó.

–í—Ä–µ—à—Ç—ñ-—Ä–µ—à—Ç –≤–æ–Ω–∏ –∑–Ω–∞–π—à–ª–∏ –ø—Ä–∏—á–∏–Ω—É –±—ñ–¥–∏ –π —Ä–∞–∑–æ–º —ó—ó –≤–∏–ø—Ä–∞–≤–∏–ª–∏. –°–≤—ñ—Ç –∑–Ω–æ–≤—É –∑–∞—Å—è—è–≤ —è—Å–∫—Ä–∞–≤–∏–º–∏ —Ñ–∞—Ä–±–∞–º–∏.

–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ {name} {returned} –¥–æ–¥–æ–º—É. {special_object} —Ä–æ–∑—Ç–∞–Ω—É–≤ —É –ø–æ–≤—ñ—Ç—Ä—ñ, –∞–ª–µ –≤ —Å–µ—Ä—Ü—ñ {name} –∑–∞–ª–∏—à–∏–≤—Å—è —Ç–µ–ø–ª–∏–π –≤–æ–≥–Ω–∏–∫ —ñ —Å–ø–æ–≥–∞–¥–∏ –ø—Ä–æ —Å–ø—Ä–∞–≤–∂–Ω—é –¥—Ä—É–∂–±—É.

–ó —Ç–æ–≥–æ –¥–Ω—è {name} {became} –Ω–∞–±–∞–≥–∞—Ç–æ {braver} —ñ {happier}. –ê –≤–≤–µ—á–µ—Ä—ñ, –∫–æ–ª–∏ {name} —Ä–æ–∑–ø–æ–≤—ñ–¥–∞–≤/—Ä–æ–∑–ø–æ–≤—ñ–¥–∞–ª–∞ {favorite} –ø—Ä–æ —Å–≤–æ—é –ø—Ä–∏–≥–æ–¥—É, —Ç–æ–π —Å–ª—É—Ö–∞–≤ –∑ —à–∏—Ä–æ–∫–æ —Ä–æ–∑–ø–ª—é—â–µ–Ω–∏–º–∏ –æ—á–∏–º–∞ ‚Äî –Ω–∞—á–µ —Ü–µ –±—É–ª–∞ –Ω–∞–π–∫—Ä–∞—â–∞ –∫–∞–∑–∫–∞ —É —Å–≤—ñ—Ç—ñ."""

        st.success("–ö–∞–∑–∫–∞ –≥–æ—Ç–æ–≤–∞! üéâ")
        st.markdown("### –í–∞—à–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –∫–∞–∑–∫–∞:")
        st.markdown(story)

        # –ü—Ä–æ–º–ø—Ç –¥–ª—è –º–∞–ª—é–Ω–∫–∞
        image_prompt = (
            f"–Ø–∫—ñ—Å–Ω–∞ –¥–∏—Ç—è—á–∞ –∫–Ω–∏–∂–∫–æ–≤–∞ —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ—è, —Ç–µ–ø–ª–∏–π –∫–∞–∑–∫–æ–≤–∏–π —Å—Ç–∏–ª—å: "
            f"{age}-—Ä—ñ—á–Ω–∏–π{'–∞' if gender != '–•–ª–æ–ø—á–∏–∫' else ''} {desc} –Ω–∞ —ñ–º'—è {name} "
            f"–∑ {favorite} –≤ {place}, –ø–æ—Ä—É—á {friend}, –º–∞–≥—ñ—á–Ω–µ —Å–≤—ñ—Ç–ª–æ, "
            f"–∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω–∞ —Å—Ü–µ–Ω–∞, –¥–µ—Ç–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —Ñ–æ–Ω, —Å—Ç–∏–ª—å Studio Ghibli + "
            f"–∫–ª–∞—Å–∏—á–Ω–∞ –¥–∏—Ç—è—á–∞ —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ—è, –º'—è–∫—ñ –∫–æ–ª—å–æ—Ä–∏, –∑–∞—Ç–∏—à–Ω–∞ –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞"
        )

        st.markdown("–ü—Ä–æ–º–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –º–∞–ª—é–Ω–∫–∞ (Bing, Grok, Flux, Leonardo —Ç–æ—â–æ):")
        st.code(image_prompt, language=None)

        st.balloons()

# –ë–ª–æ–∫ –ø—Ä–µ–º—ñ—É–º
st.divider()
st.subheader("üí∞ –ù–µ–æ–±–º–µ–∂–µ–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–∞–∑–æ–∫ + –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω—ñ —Ç–µ–º–∏")
st.markdown("–ü—Ä–µ–º—ñ—É–º ‚Äî –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ 199‚Äì299 –≥—Ä–Ω –∞–±–æ –ø—ñ–¥–ø–∏—Å–∫–∞.")

payment_link = st.text_input(
    "–í—Å—Ç–∞–≤—Ç–µ —Å—é–¥–∏ –≤–∞—à–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –æ–ø–ª–∞—Ç—É (Gumroad / BuyMeACoffee / —ñ–Ω—à–µ)",
    value="https://your-gumroad-link.com"
)

if payment_link and payment_link != "https://your-gumroad-link.com":
    st.markdown(f"[–ö—É–ø–∏—Ç–∏ –ø—Ä–µ–º—ñ—É–º ‚Üí]({payment_link})")   
