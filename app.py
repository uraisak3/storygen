
import streamlit as st
import random

st.set_page_config(page_title="StoryGen", page_icon="üìñ", layout="centered")

st.title("üìñ StoryGen")
st.subheader("–ü–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –∫–∞–∑–∫–∏ –¥–ª—è –≤–∞—à–æ—ó –¥–∏—Ç–∏–Ω–∏")
st.markdown("–Ø–∫—ñ—Å–Ω—ñ, –¥–æ–≤–≥—ñ —Ç–∞ –µ–º–æ—Ü—ñ–π–Ω—ñ —ñ—Å—Ç–æ—Ä—ñ—ó —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é. –Ü–¥–µ–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥ —Å–Ω–æ–º.")

# –§–æ—Ä–º–∞
col1, col2 = st.columns(2)
with col1:
    name = st.text_input("–Ü–º'—è –¥–∏—Ç–∏–Ω–∏", placeholder="–Ü–≤–∞–Ω–∫–æ")
    age = st.slider("–í—ñ–∫ –¥–∏—Ç–∏–Ω–∏", 3, 12, 6)
with col2:
    favorite = st.text_input("–£–ª—é–±–ª–µ–Ω–∞ —Ç–≤–∞—Ä–∏–Ω–∞ / –≥–µ—Ä–æ–π / —Ä—ñ—á", placeholder="–¥–∏–Ω–æ–∑–∞–≤—Ä")
    gender = st.selectbox("–°—Ç–∞—Ç—å", ["–•–ª–æ–ø—á–∏–∫", "–î—ñ–≤—á–∏–Ω–∫–∞", "–ù–µ –≤–∞–∂–ª–∏–≤–æ"])

theme = st.selectbox("–¢–µ–º–∞ —ñ—Å—Ç–æ—Ä—ñ—ó", 
    ["–ü—Ä–∏–≥–æ–¥–∏", "–ú–∞–≥—ñ—è —Ç–∞ —á–∞—Ä—ñ–≤–Ω–∏—Ü—Ç–≤–æ", "–î—Ä—É–∂–±–∞", "–ü–æ–¥–æ—Ä–æ–∂—ñ", "–ü—Ä–∏—Ä–æ–¥–∞ —ñ —Ç–≤–∞—Ä–∏–Ω–∏", 
     "–°–º—ñ–ª–∏–≤—ñ—Å—Ç—å", "–î–æ–±—Ä–æ—Ç–∞", "–ü–æ–¥–æ–ª–∞–Ω–Ω—è —Å—Ç—Ä–∞—Ö—É", "–°—ñ–º'—è", "–ú—Ä—ñ—è"])

if st.button("‚ú® –ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∫–∞–∑–∫—É", type="primary"):
    if not name or not favorite:
        st.error("–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å —ñ–º'—è –¥–∏—Ç–∏–Ω–∏ —Ç–∞ —É–ª—é–±–ª–µ–Ω—É —Ç–≤–∞—Ä–∏–Ω—É/–≥–µ—Ä–æ—è")
    else:
        # === –ü–û–ö–†–ê–©–ï–ù–ê –ì–ï–ù–ï–†–ê–¶–Ü–Ø –ö–ê–ó–ö–ò ===
        places = ["–∑–∞—á–∞—Ä–æ–≤–∞–Ω–æ–º—É –ª—ñ—Å—ñ", "–¥–∞–≤–Ω—å–æ–º—É –∫–æ—Ä–æ–ª—ñ–≤—Å—Ç–≤—ñ –Ω–∞ –≤–µ—Ä—à–∏–Ω—ñ –≥–æ—Ä–∏", "—Ç–∞—î–º–Ω–∏—á–æ–º—É –ø—ñ–¥–≤–æ–¥–Ω–æ–º—É –º—ñ—Å—Ç—ñ", "—Å—Ç–∞—Ä–æ–º—É —á–∞—Ä—ñ–≤–Ω–æ–º—É –∑–∞–º–∫—É", "–∑–æ—Ä—è–Ω—ñ–π –ø–ª–∞–Ω–µ—Ç—ñ", "–≤–µ–ª–∏–∫–æ–º—É —á–∞—Ä—ñ–≤–Ω–æ–º—É —Å–∞–¥—É", "–∑–∞–±—É—Ç–æ–º—É —Å–µ–ª—ñ —Å–µ—Ä–µ–¥ –ø–∞–≥–æ—Ä–±—ñ–≤"]
        friends = ["—Ä–æ–∑—É–º–Ω–∏–π —Å—Ç–∞—Ä–∏–π —Å–æ–≤–∞", "—Å–º—ñ–ª–∏–≤–∏–π –≤–æ–≤—á–µ–Ω—è", "–¥–æ–±—Ä–∞ —Ñ–µ—è-–±–µ—Ä–µ–≥–∏–Ω—è", "–≤–µ—Å–µ–ª–∏–π –¥—Ä–∞–∫–æ–Ω—á–∏–∫-—Ö–º–∞—Ä–∏–Ω–∫–∞", "—Ç–∞—î–º–Ω–∏—á–∏–π —î–¥–∏–Ω–æ—Ä—ñ–≥", "–≥—Ä–∞–π–ª–∏–≤–∏–π –ª–∏—Å–∏—á–∫–∞-—á–∞—Ä—ñ–≤–Ω–∏–∫", "–≤–µ–ª–∏–∫–∏–π –≤–µ–¥–º—ñ–¥—å-–æ—Ö–æ—Ä–æ–Ω–µ—Ü—å"]
        objects = ["–º–∞–≥—ñ—á–Ω–∏–π –∫—Ä–∏—Å—Ç–∞–ª", "–¥–∞–≤–Ω—é –∫–∞—Ä—Ç—É –∑—ñ —Å–∫–∞—Ä–±–∞–º–∏", "—á–∞—Ä—ñ–≤–Ω—É —Ñ–ª–µ–π—Ç—É", "–∑–æ–ª–æ—Ç–µ –ø–µ—Ä–æ", "—Å—Ä—ñ–±–Ω–∏–π –∞–º—É–ª–µ—Ç", "–∂–∏–≤—É –∫–Ω–∏–≥—É —ñ—Å—Ç–æ—Ä—ñ–π"]
        
        place = random.choice(places)
        friend = random.choice(friends)
        special_object = random.choice(objects)

        # –£–∑–≥–æ–¥–∂–µ–Ω–Ω—è —Ä–æ–¥—É
        if gender == "–•–ª–æ–ø—á–∏–∫":
            zhyv = "–ñ–∏–≤-–±—É"
            desc = "—Ö–ª–æ–ø—á–∏–∫"
            loved = "–ª—é–±–∏–≤"
            found = "–∑–Ω–∞–π—à–æ–≤"
            went = "–ø—ñ—à–æ–≤"
            returned = "–ø–æ–≤–µ—Ä–Ω—É–≤—Å—è"
            became = "—Å—Ç–∞–≤"
            braver = "—Å–º—ñ–ª–∏–≤—ñ—à–∏–º"
            happier = "—â–∞—Å–ª–∏–≤—ñ—à–∏–º"
        else:
            zhyv = "–ñ–∏–ª–∞-–±—É–ª–∞"
            desc = "–¥—ñ–≤—á–∏–Ω–∫–∞" if gender == "–î—ñ–≤—á–∏–Ω–∫–∞" else "–¥–∏—Ç–∏–Ω–∞"
            loved = "–ª—é–±–∏–ª–∞"
            found = "–∑–Ω–∞–π—à–ª–∞"
            went = "–ø—ñ—à–ª–∞"
            returned = "–ø–æ–≤–µ—Ä–Ω—É–ª–∞—Å—è"
            became = "—Å—Ç–∞–ª–∞"
            braver = "—Å–º—ñ–ª–∏–≤—ñ—à–æ—é"
            happier = "—â–∞—Å–ª–∏–≤—ñ—à–æ—é"

        # –î–æ–≤—à–∞ —ñ —è–∫—ñ—Å–Ω—ñ—à–∞ —ñ—Å—Ç–æ—Ä—ñ—è
        story = f"""{zhyv} {desc} –Ω–∞ —ñ–º'—è {name}, —è–∫—ñ–π/—è–∫–æ–º—É –±—É–ª–æ {age} —Ä–æ–∫—ñ–≤.

{name} –¥—É–∂–µ {loved} —Å–≤–æ–≥–æ —É–ª—é–±–ª–µ–Ω—Ü—è ‚Äî {favorite}. –ö–æ–∂–Ω–æ–≥–æ –≤–µ—á–æ—Ä–∞ –≤–æ–Ω–∏ —Ä–∞–∑–æ–º –º—Ä—ñ—è–ª–∏ –ø—Ä–æ –ø—Ä–∏–≥–æ–¥–∏.

–û–¥–Ω–æ–≥–æ —Ä–∞–∑—É, –≥—É–ª—è—é—á–∏ –±—ñ–ª—è —Å—Ç–∞—Ä–æ–≥–æ –¥—É–±–∞, {name} {found} –¥–∏–≤–Ω–∏–π –±–ª–∏—Å–∫—É—á–∏–π {special_object}. –Ø–∫ —Ç—ñ–ª—å–∫–∏ {name} —Ç–æ—Ä–∫–Ω—É–≤—Å—è/—Ç–æ—Ä–∫–Ω—É–ª–∞—Å—è –π–æ–≥–æ, –ø–µ—Ä–µ–¥ –Ω–∏–º–∏ –≤—ñ–¥–∫—Ä–∏–≤—Å—è —Å—è–π–ª–∏–≤–∏–π –ø–æ—Ä—Ç–∞–ª. –ù–µ –≤–∞–≥–∞—é—á–∏—Å—å, {name} {went} —É {place}.

–¢–∞–º –Ω–∞ {name} —á–µ–∫–∞–≤ –Ω–æ–≤–∏–π –¥—Ä—É–≥ ‚Äî {friend}. ¬´–ü—Ä–∏–≤—ñ—Ç, –º–∞–Ω–¥—Ä—ñ–≤–Ω–∏–∫—É! ‚Äî —Å–∫–∞–∑–∞–≤ –¥—Ä—É–≥. ‚Äî –Ø —á–µ–∫–∞–≤ –Ω–∞ —Ç–µ–±–µ. –¢—É—Ç —Ç—Ä–∞–ø–∏–ª–∞—Å—è –±—ñ–¥–∞, —ñ —Ç—ñ–ª—å–∫–∏ —Ç–∏ –º–æ–∂–µ—à –¥–æ–ø–æ–º–æ–≥—Ç–∏¬ª.

–†–∞–∑–æ–º –≤–æ–Ω–∏ –≤–∏—Ä—É—à–∏–ª–∏ —É –∑–∞—Ö–æ–ø–ª–∏–≤—É –ø–æ–¥–æ—Ä–æ–∂. {name} –¥–æ–≤–µ–ª–æ—Å—è –¥–æ–ª–∞—Ç–∏ –≤–∏—Å–æ–∫—ñ –≥–æ—Ä–∏, –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–∏ —á–µ—Ä–µ–∑ —á–∞—Ä—ñ–≤–Ω—ñ —Ä—ñ—á–∫–∏ —Ç–∞ —Ä–æ–∑–≥–∞–¥—É–≤–∞—Ç–∏ –∑–∞–≥–∞–¥–∫–∏ –¥—Ä–µ–≤–Ω—ñ—Ö –¥—É—Ö—ñ–≤. –ü–æ –¥–æ—Ä–æ–∑—ñ {name} –¥—ñ–∑–Ω–∞–≤—Å—è/–¥—ñ–∑–Ω–∞–ª–∞—Å—è –±–∞–≥–∞—Ç–æ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ –¥—Ä—É–∂–±—É, —Å–º—ñ–ª–∏–≤—ñ—Å—Ç—å —ñ –¥–æ–±—Ä–æ—Ç—É.

–ü—ñ—Å–ª—è –¥–æ–≤–≥–∏—Ö –≤–∏–ø—Ä–æ–±—É–≤–∞–Ω—å {name} {returned} –¥–æ–¥–æ–º—É. {special_object} –∑–Ω–∏–∫, –∞–ª–µ –≤ —Å–µ—Ä—Ü—ñ {name} –Ω–∞–∑–∞–≤–∂–¥–∏ –∑–∞–ª–∏—à–∏–ª–∞—Å—è —Ç–µ–ø–ª–∞ –ø–∞–º'—è—Ç—å –ø—Ä–æ –ø—Ä–∏–≥–æ–¥–∏. 

–ó —Ç–æ–≥–æ –¥–Ω—è {name} {became} –Ω–∞–±–∞–≥–∞—Ç–æ {braver} —ñ {happier}. –ê {favorite} —Ç–µ–ø–µ—Ä –∑–∞–≤–∂–¥–∏ —Å–ª—É—Ö–∞–≤/—Å–ª—É—Ö–∞–ª–∞ –Ω–∞–π—á–∞—Ä—ñ–≤–Ω—ñ—à—ñ —ñ—Å—Ç–æ—Ä—ñ—ó —É —Å–≤—ñ—Ç—ñ ‚Äî —Ç—ñ, —è–∫—ñ {name} –ø–µ—Ä–µ–∂–∏–≤/–ø–µ—Ä–µ–∂–∏–ª–∞ –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ."""

        st.success("–ö–∞–∑–∫–∞ –≥–æ—Ç–æ–≤–∞! üéâ")
        st.markdown("### –í–∞—à–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –∫–∞–∑–∫–∞:")
        st.markdown(story)

        # –ü—Ä–æ–º–ø—Ç –¥–ª—è —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ–π (–ø–æ–∫—Ä–∞—â–µ–Ω–∏–π)
        image_prompt = f"–Ø–∫—ñ—Å–Ω–∞ –¥–∏—Ç—è—á–∞ –∫–Ω–∏–∂–∫–æ–≤–∞ —ñ–ª—é—Å—Ç—Ä–∞—Ü—ñ—è –≤ —Ç–µ–ø–ª–æ–º—É –∫–∞–∑–∫–æ–≤–æ–º—É —Å—Ç–∏–ª—ñ: {age}-—Ä—ñ—á–Ω–∏–π{'–∞' if gender != '–•–ª–æ–ø—á–∏–∫' else ''} {desc} –Ω–∞ —ñ–º'—è {name} –∑ {favorite} –≤ {place}. –ê—Ç–º–æ—Å—Ñ–µ—Ä–Ω–∞ —Å—Ü–µ–Ω–∞ –∑ {friend}, –º–∞–≥—ñ—á–Ω–µ —Å–≤—ñ—Ç–ª–æ, –¥–µ—Ç–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —Ñ–æ–Ω, —Å—Ç–∏–ª—å Studio Ghibli + children's book illustration, –º'—è–∫—ñ –∫–æ–ª—å–æ—Ä–∏"

st.markdown("–ü—Ä–æ–º–ø—Ç –¥–ª—è –º–∞–ª—é–Ω–∫—ñ–≤ (—Å–∫–æ–ø—ñ—é–π —É Bing, Grok, Flux –∞–±–æ Leonardo):")
        st.code(image_prompt, language=None)

        st.balloons()

st.divider()

st.subheader("üí∞ –•–æ—á–µ—Ç–µ –Ω–µ–æ–±–º–µ–∂–µ–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–∞–∑–æ–∫ + –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω—ñ —Ç–µ–º–∏?")
st.markdown("–ü—Ä–µ–º—ñ—É–º-–≤–µ—Ä—Å—ñ—è ‚Äî –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ 199‚Äì299 –≥—Ä–Ω –∞–±–æ –ø—ñ–¥–ø–∏—Å–∫–∞.")

payment_link = st.text_input("–í—Å—Ç–∞–≤—Ç–µ —Å—é–¥–∏ –≤–∞—à–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –æ–ø–ª–∞—Ç—É (Gumroad / BuyMeACoffee)", 
                            value="https://your-gumroad-link.com")

if payment_link and payment_link != "https://your-gumroad-link.com":
    st.markdown(f"[–ö—É–ø–∏—Ç–∏ –ø—Ä–µ–º—ñ—É–º ‚Üí]({payment_link})")
